<!DOCTYPE html>
<html lang="pt-br">
<head> 
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SPANEL | Blockman Go Admin</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&family=Orbitron:wght@400;700;900&display=swap" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'neon-green': '#00ff41',
                        'neon-dark': '#0d0208',
                        'cyber-purple': '#bc13fe',
                        'dark-bg': '#050505',
                        'glass': 'rgba(0, 20, 0, 0.7)'
                    },
                    fontFamily: {
                        mono: ['"Share Tech Mono"', 'monospace'],
                        header: ['"Orbitron"', 'sans-serif'],
                    },
                    animation: {
                        'pulse-fast': 'pulse 1s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                        'glitch': 'glitch 1s linear infinite',
                    },
                    keyframes: {
                        glitch: {
                            '2%, 64%': { transform: 'translate(2px,0) skew(0deg)' },
                            '4%, 60%': { transform: 'translate(-2px,0) skew(0deg)' },
                            '62%': { transform: 'translate(0,0) skew(5deg)' },
                        }
                    }
                }
            }
        }
    </script>
    <style>
        body {
            background-color: #000;
            color: #00ff41;
            font-family: 'Share Tech Mono', monospace;
            overflow-x: hidden;
            cursor: crosshair;
        }

        /* Scrollbar Personalizada */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #000;
        }
        ::-webkit-scrollbar-thumb {
            background: #00ff41;
            border-radius: 4px;
        }

        /* Efeito CRT (Scanlines) */
        .scanlines {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(
                to bottom,
                rgba(255,255,255,0),
                rgba(255,255,255,0) 50%,
                rgba(0,0,0,0.2) 50%,
                rgba(0,0,0,0.2)
            );
            background-size: 100% 4px;
            z-index: 50;
            pointer-events: none;
            opacity: 0.6;
        }

        /* Classes Utilitárias Cyberpunk */
        .cyber-border {
            border: 1px solid #00ff41;
            box-shadow: 0 0 5px #00ff41, inset 0 0 5px #00ff41;
            position: relative;
            background: rgba(0, 10, 0, 0.8);
            backdrop-filter: blur(5px);
        }

        .cyber-border::before {
            content: '';
            position: absolute;
            top: -2px; left: -2px;
            width: 10px; height: 10px;
            border-top: 2px solid #00ff41;
            border-left: 2px solid #00ff41;
        }
        .cyber-border::after {
            content: '';
            position: absolute;
            bottom: -2px; right: -2px;
            width: 10px; height: 10px;
            border-bottom: 2px solid #00ff41;
            border-right: 2px solid #00ff41;
        }

        .glitch-text {
            position: relative;
        }
        .glitch-text::before, .glitch-text::after {
            content: attr(data-text);
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #000;
        }
        .glitch-text::before {
            left: 2px;
            text-shadow: -1px 0 #ff00c1;
            clip: rect(44px, 450px, 56px, 0);
            animation: glitch-anim 5s infinite linear alternate-reverse;
        }
        .glitch-text::after {
            left: -2px;
            text-shadow: -1px 0 #00fff9;
            clip: rect(44px, 450px, 56px, 0);
            animation: glitch-anim2 5s infinite linear alternate-reverse;
        }

        @keyframes glitch-anim {
            0% { clip: rect(12px, 9999px, 32px, 0); }
            5% { clip: rect(82px, 9999px, 92px, 0); }
            10% { clip: rect(2px, 9999px, 12px, 0); }
            15% { clip: rect(62px, 9999px, 72px, 0); }
            100% { clip: rect(42px, 9999px, 52px, 0); }
        }
        @keyframes glitch-anim2 {
            0% { clip: rect(62px, 9999px, 12px, 0); }
            5% { clip: rect(2px, 9999px, 32px, 0); }
            10% { clip: rect(82px, 9999px, 92px, 0); }
            15% { clip: rect(12px, 9999px, 52px, 0); }
            100% { clip: rect(32px, 9999px, 72px, 0); }
        }

        .btn-hover-effect {
            transition: all 0.3s;
        }
        .btn-hover-effect:hover {
            background-color: #00ff41;
            color: #000;
            box-shadow: 0 0 20px #00ff41;
            transform: scale(1.02);
        }

        .hidden-page {
            display: none;
            opacity: 0;
            transition: opacity 1s ease-in-out;
        }
        
        .visible-page {
            display: block;
            opacity: 1;
        }

        /* Matrix Canvas */
        #matrix {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            z-index: -1;
        }

        input[type="range"] {
            accent-color: #00ff41;
        }
        
        input, textarea {
            caret-color: #00ff41;
        }
    </style>
</head>
<body>

    <!-- Canvas Fundo Matrix -->
    <canvas id="matrix"></canvas>
    
    <!-- Efeito Scanlines -->
    <div class="scanlines"></div>

    <!-- TELA INICIAL (BREACH PROTOCOL) -->
    <div id="start-screen" class="fixed inset-0 z-50 bg-black flex flex-col items-center justify-center text-center p-4">
        <div class="max-w-2xl w-full border border-green-900 p-8 bg-black/90 relative overflow-hidden group">
            <div class="absolute top-0 left-0 w-full h-1 bg-green-500 shadow-[0_0_10px_#00ff41]"></div>
            
            <h1 class="text-6xl md:text-8xl font-header mb-4 text-white glitch-text" data-text="SPANEL">SPANEL</h1>
            <p class="text-green-500 mb-8 text-xl typing-effect">ADMIN PANEL PROTOCOL V.2.5 DETECTED...</p>
            
            <button onclick="enterSystem()" class="px-8 py-4 border-2 border-green-500 text-green-500 font-bold text-2xl hover:bg-green-500 hover:text-black transition-all duration-300 shadow-[0_0_15px_rgba(0,255,65,0.3)] animate-pulse">
                <i class="fas fa-power-off mr-2"></i> INICIAR SISTEMA
            </button>
            
            <div class="mt-8 text-xs text-gray-500 font-mono">
                SECURE CONNECTION REQUESTED // ENCRYPTING DATA...
            </div>
        </div>
    </div>

    <!-- CONTEÚDO PRINCIPAL DO SITE -->
    <div id="main-content" class="hidden-page min-h-screen pb-20 relative">
        
        <!-- HEADER / NAVBAR -->
        <header class="border-b border-green-900 bg-black/80 backdrop-blur-md sticky top-0 z-40">
            <div class="container mx-auto px-4 py-3 flex flex-wrap justify-between items-center">
                <div class="flex items-center space-x-2">
                    <i class="fas fa-shield-alt text-3xl text-neon-green animate-pulse"></i>
                    <span class="text-3xl font-header tracking-wider text-white">SPANEL</span>
                </div>
                
                <!-- Music Player Widget -->
                <div class="cyber-border px-4 py-2 flex items-center gap-3 mt-2 md:mt-0">
                    <div class="text-xs text-green-400">
                        <div id="song-title" class="font-bold w-32 truncate">System Audio</div>
                        <div class="w-full bg-gray-900 h-1 mt-1 rounded">
                            <div id="progress-bar" class="bg-green-500 h-1 w-0 rounded"></div>
                        </div>
                    </div>
                    <div class="flex gap-2 text-green-500">
                        <button onclick="prevSong()"><i class="fas fa-backward hover:text-white"></i></button>
                        <button onclick="togglePlay()"><i id="play-btn" class="fas fa-pause hover:text-white"></i></button>
                        <button onclick="nextSong()"><i class="fas fa-forward hover:text-white"></i></button>
                    </div>
                </div>
            </div>
        </header>

        <div class="container mx-auto px-4 pt-10">
            
            <!-- HERO SECTION -->
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-10 items-center mb-16">
                <div class="order-2 lg:order-1 space-y-6">
                    <div class="inline-block border border-green-500 px-2 py-1 text-xs text-green-400 mb-2">SYSTEM: ONLINE</div>
                    <h1 class="text-5xl md:text-7xl font-header font-bold text-white mb-2 leading-tight">
                        DOMINE O <br>
                        <span class="text-neon-green glitch-text" data-text="BLOCKMAN GO">BLOCKMAN GO</span>
                    </h1>
                    <p class="text-gray-300 text-lg border-l-4 border-green-500 pl-4 bg-green-900/10 py-2">
                        O painel administrativo definitivo. Mais poder, mais controle, mais estilo. O Spanel é a ferramenta que faltava para sua gameplay.
                    </p>
                    
                    <div class="flex flex-col sm:flex-row gap-4 pt-4">
                        <button class="cyber-border py-4 px-8 text-xl font-bold flex items-center justify-center gap-3 btn-hover-effect group">
                            <i class="fas fa-download group-hover:animate-bounce"></i> 
                            DOWNLOAD SPANEL
                        </button>
                        <a href="https://discord.gg/k8STRGXu" target="_blank" class="border border-indigo-500 bg-indigo-900/20 text-indigo-400 py-4 px-8 text-xl font-bold flex items-center justify-center gap-3 hover:bg-indigo-600 hover:text-white transition-all duration-300 shadow-[0_0_10px_#6366f1]">
                            <i class="fab fa-discord"></i> 
                            SERVIDOR DISCORD
                        </a>
                    </div>
                </div>

                <!-- Decorative Terminal -->
                <div class="order-1 lg:order-2 cyber-border p-1 bg-black/80 h-80 flex flex-col">
                    <div class="flex justify-between items-center bg-green-900/20 p-2 border-b border-green-900">
                        <span class="text-xs">root@spanel:~</span>
                        <div class="flex gap-1">
                            <div class="w-3 h-3 rounded-full bg-red-500"></div>
                            <div class="w-3 h-3 rounded-full bg-yellow-500"></div>
                            <div class="w-3 h-3 rounded-full bg-green-500"></div>
                        </div>
                    </div>
                    <div id="terminal-content" class="p-4 text-green-400 font-mono text-sm overflow-hidden flex-1 space-y-1">
                        <!-- Auto-typed JS will fill this -->
                    </div>
                </div>
            </div>

            <!-- FEATURES GRID -->
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 mb-20">
                
                <!-- 1. GERADOR DE NICK -->
                <div class="cyber-border p-6 bg-black/50 hover:bg-green-900/10 transition-colors">
                    <h3 class="text-2xl font-header text-white mb-4 border-b border-green-800 pb-2"><i class="fas fa-signature mr-2"></i> GERADOR DE NICK</h3>
                    <div class="space-y-4">
                        <input type="text" id="baseName" placeholder="Seu Nome (Opcional)" class="w-full bg-black border border-green-700 p-2 text-green-500 focus:outline-none focus:border-green-400">
                        <button onclick="generateNick()" class="w-full bg-green-900/30 border border-green-500 text-green-400 py-2 hover:bg-green-500 hover:text-black transition">
                            <i class="fas fa-random"></i> GERAR NICK
                        </button>
                        <div id="nick-result" class="h-12 flex items-center justify-center bg-black border border-dashed border-gray-700 text-xl font-bold text-white tracking-widest cursor-pointer hover:text-green-400" onclick="copyNick()">
                            ---
                        </div>
                    </div>
                </div>

                <!-- 2. WEB SEARCH PROTOCOL (NOVA FUNÇÃO) -->
                <div class="cyber-border p-6 bg-black/50 hover:bg-green-900/10 transition-colors">
                    <h3 class="text-2xl font-header text-white mb-4 border-b border-green-800 pb-2"><i class="fas fa-globe mr-2"></i> WEB SEARCH</h3>
                    <p class="text-gray-400 text-sm mb-4">Execute buscas rápidas sem sair do protocolo.</p>
                    <div class="flex flex-col gap-3">
                        <input type="text" id="web-search-input" placeholder="Digite sua pesquisa..." class="w-full bg-black border border-green-700 p-2 text-green-500 focus:outline-none focus:border-green-400" onkeypress="handleSearch(event)">
                        <button onclick="webSearch()" class="w-full bg-blue-900/30 border border-blue-500 text-blue-400 py-2 hover:bg-blue-600 hover:text-white transition uppercase font-bold text-sm">
                            <i class="fas fa-search"></i> Iniciar Pesquisa
                        </button>
                    </div>
                </div>

                <!-- 3. CALCULADORA K/D (NOVA FUNÇÃO) -->
                <div class="cyber-border p-6 bg-black/50 hover:bg-green-900/10 transition-colors">
                    <h3 class="text-2xl font-header text-white mb-4 border-b border-green-800 pb-2"><i class="fas fa-crosshairs mr-2"></i> CALC. K/D</h3>
                    <div class="grid grid-cols-2 gap-3 mb-3">
                        <div>
                            <label class="text-xs text-gray-500">KILLS</label>
                            <input type="number" id="kills-input" class="w-full bg-black border border-green-700 p-1 text-center text-white">
                        </div>
                        <div>
                            <label class="text-xs text-gray-500">DEATHS</label>
                            <input type="number" id="deaths-input" class="w-full bg-black border border-red-700 p-1 text-center text-white">
                        </div>
                    </div>
                    <button onclick="calcKD()" class="w-full bg-green-900/30 border border-green-500 text-green-400 py-1 mb-3 hover:bg-green-500 hover:text-black transition text-sm">CALCULAR</button>
                    <div class="text-center">
                        <div class="text-xs text-gray-400">RATIO</div>
                        <div id="kd-result" class="text-3xl font-bold text-white">0.00</div>
                        <div id="kd-rank" class="text-sm text-neon-green mt-1">---</div>
                    </div>
                </div>

                <!-- 4. YOUTUBE VIEWER -->
                <div class="cyber-border p-6 bg-black/50 hover:bg-green-900/10 transition-colors col-span-1 md:col-span-2 lg:col-span-3">
                    <h3 class="text-2xl font-header text-white mb-4 border-b border-green-800 pb-2"><i class="fab fa-youtube mr-2"></i> HACKER TUBE</h3>
                    <div class="flex flex-col md:flex-row gap-2 mb-4">
                        <input type="text" id="yt-link" placeholder="Cole o link do vídeo do YouTube aqui..." class="flex-1 bg-black border border-green-700 p-2 text-green-500 focus:outline-none focus:border-green-400">
                        <button onclick="loadVideo()" class="bg-red-900/30 border border-red-500 text-red-400 px-6 py-2 hover:bg-red-600 hover:text-white transition">
                            ASSISTIR
                        </button>
                    </div>
                    <div class="aspect-video w-full bg-black border border-gray-800 relative flex items-center justify-center overflow-hidden">
                        <div id="video-placeholder" class="text-gray-600 flex flex-col items-center">
                            <i class="fas fa-play-circle text-4xl mb-2"></i>
                            <span>Aguardando Link...</span>
                        </div>
                        <iframe id="yt-frame" class="absolute inset-0 w-full h-full hidden" src="" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                    </div>
                </div>

                <!-- 5. NOTAS SEGURAS (NOVA FUNÇÃO) -->
                <div class="cyber-border p-6 bg-black/50 hover:bg-green-900/10 transition-colors col-span-1 md:col-span-2">
                    <div class="flex justify-between items-center mb-4 border-b border-green-800 pb-2">
                        <h3 class="text-2xl font-header text-white"><i class="fas fa-sticky-note mr-2"></i> NOTAS SEGURAS</h3>
                        <span id="save-status" class="text-xs text-green-500">AUTO-SAVE: ON</span>
                    </div>
                    <textarea id="secure-notes" class="w-full h-32 bg-black border border-green-700 p-3 text-green-400 focus:outline-none focus:shadow-[0_0_10px_#00ff41] font-mono resize-none" placeholder="// Digite seus dados, coordenadas ou lembretes aqui..."></textarea>
                    <div class="flex justify-between mt-2">
                        <button onclick="clearNotes()" class="text-xs text-red-500 hover:text-red-300">[ LIMPAR DADOS ]</button>
                        <span class="text-xs text-gray-500">Armazenamento Local Criptografado (Simulado)</span>
                    </div>
                </div>

                <!-- 6. RELÓGIO MUNDIAL (NOVA FUNÇÃO) -->
                <div class="cyber-border p-6 bg-black/50 hover:bg-green-900/10 transition-colors">
                    <h3 class="text-2xl font-header text-white mb-4 border-b border-green-800 pb-2"><i class="fas fa-clock mr-2"></i> SERVER TIME</h3>
                    <div class="space-y-3 font-mono">
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400"><i class="fas fa-flag-usa mr-1"></i> BRASIL</span>
                            <span id="time-br" class="text-green-400 font-bold">--:--:--</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400"><i class="fas fa-flag-usa mr-1"></i> NEW YORK</span>
                            <span id="time-ny" class="text-blue-400 font-bold">--:--:--</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400"><i class="fas fa-globe-asia mr-1"></i> CHINA</span>
                            <span id="time-cn" class="text-red-400 font-bold">--:--:--</span>
                        </div>
                    </div>
                </div>

                <!-- 7. GERADOR DE SENHA (NOVA FUNÇÃO) -->
                <div class="cyber-border p-6 bg-black/50 hover:bg-green-900/10 transition-colors">
                    <h3 class="text-2xl font-header text-white mb-4 border-b border-green-800 pb-2"><i class="fas fa-key mr-2"></i> PASS GENERATOR</h3>
                    <div class="mb-4">
                        <div class="flex justify-between text-xs text-gray-400 mb-1">
                            <span>Complexidade</span>
                            <span id="pass-len-val">16 chars</span>
                        </div>
                        <input type="range" id="pass-len" min="8" max="32" value="16" class="w-full h-2 bg-gray-800 rounded-lg appearance-none cursor-pointer" oninput="document.getElementById('pass-len-val').innerText = this.value + ' chars'">
                    </div>
                    <div class="bg-black border border-green-900 p-2 text-center mb-3 overflow-hidden">
                        <span id="pass-result" class="text-green-400 font-bold tracking-widest text-sm break-all">---</span>
                    </div>
                    <button onclick="generatePass()" class="w-full border border-purple-500 text-purple-400 py-1 hover:bg-purple-600 hover:text-white transition text-sm">GERAR CHAVE</button>
                </div>

                <!-- 8. PING TESTER -->
                <div class="cyber-border p-6 bg-black/50 hover:bg-green-900/10 transition-colors">
                    <h3 class="text-2xl font-header text-white mb-4 border-b border-green-800 pb-2"><i class="fas fa-network-wired mr-2"></i> REDE</h3>
                    <div class="flex justify-between items-center mb-4">
                        <span class="text-gray-400">Status:</span>
                        <span class="text-green-500 animate-pulse">ONLINE</span>
                    </div>
                    <div class="space-y-2">
                        <div class="flex justify-between text-sm">
                            <span>PING</span>
                            <span id="ping-val" class="text-green-400 font-bold">24 ms</span>
                        </div>
                        <div class="w-full bg-gray-900 h-2 rounded overflow-hidden">
                            <div id="ping-bar" class="bg-green-500 h-full w-[20%] transition-all duration-100"></div>
                        </div>
                    </div>
                    <div class="mt-4 text-xs font-mono text-gray-600">
                        > Traffic stable.
                    </div>
                </div>

                <!-- 9. DOWNLOAD LOG -->
                <div class="cyber-border p-6 bg-black/50 hover:bg-green-900/10 transition-colors">
                    <h3 class="text-2xl font-header text-white mb-4 border-b border-green-800 pb-2"><i class="fas fa-history mr-2"></i> VERSÕES</h3>
                    <ul class="space-y-3 text-sm">
                        <li class="flex justify-between items-center border-b border-gray-800 pb-1">
                            <span class="text-white">Spanel v2.5 <span class="text-xs text-neon-green ml-2">[NEW]</span></span>
                            <i class="fas fa-check text-green-500"></i>
                        </li>
                        <li class="flex justify-between items-center border-b border-gray-800 pb-1 opacity-60">
                            <span class="text-gray-400">Spanel v2.0</span>
                        </li>
                    </ul>
                </div>

            </div>

        </div>

        <!-- FOOTER -->
        <footer class="absolute bottom-0 w-full border-t border-green-900 bg-black/90 py-6 text-center">
            <div class="text-gray-400 text-sm">
                <p class="mb-2">&copy; 2024 SPANEL PROJECT. Todos os direitos reservados.</p>
                <p class="text-green-600 font-bold tracking-widest uppercase text-xs">
                    <i class="fas fa-code"></i> Website criado por : <span class="text-white hover:text-neon-green cursor-help transition">Mazikeen</span>
                </p>
            </div>
        </footer>

        <!-- Audio Element (Invisible) -->
        <audio id="audio-player" crossorigin="anonymous"></audio>

    </div>

    <script>
        // --- MATRIX RAIN EFFECT ---
        const canvas = document.getElementById('matrix');
        const ctx = canvas.getContext('2d');

        let width = canvas.width = window.innerWidth;
        let height = canvas.height = window.innerHeight;

        const cols = Math.floor(width / 20) + 1;
        const ypos = Array(cols).fill(0);

        window.addEventListener('resize', () => {
            width = canvas.width = window.innerWidth;
            height = canvas.height = window.innerHeight;
        });

        function matrix() {
            ctx.fillStyle = '#0001';
            ctx.fillRect(0, 0, width, height);

            ctx.fillStyle = '#0f0';
            ctx.font = '15pt monospace';

            ypos.forEach((y, ind) => {
                const text = String.fromCharCode(Math.random() * 128);
                const x = ind * 20;
                ctx.fillText(text, x, y);
                if (y > 100 + Math.random() * 10000) ypos[ind] = 0;
                else ypos[ind] = y + 20;
            });
        }
        setInterval(matrix, 50);

        // --- MUSIC PLAYER SYSTEM ---
        const songs = [
            // Usei links mais estáveis para evitar o erro NotSupportedError
            { title: "Cyber Tension", src: "https://files.freemusicarchive.org/storage-freemusicarchive-org/music/no_curator/Tours/Enthusiast/Tours_-_01_-_Enthusiast.mp3" },
            { title: "Neon Night", src: "https://files.freemusicarchive.org/storage-freemusicarchive-org/music/ccCommunity/Kai_Engel/Satin/Kai_Engel_-_04_-_Sentinel.mp3" },
            { title: "System Breach", src: "https://files.freemusicarchive.org/storage-freemusicarchive-org/music/WFMU/Broke_For_Free/Directionless_EP/Broke_For_Free_-_01_-_Night_Owl.mp3" }
        ];

        let currentSongIndex = 0;
        const audioPlayer = document.getElementById('audio-player');
        const playBtnIcon = document.getElementById('play-btn');
        const songTitle = document.getElementById('song-title');
        const progressBar = document.getElementById('progress-bar');

        function loadSong(index) {
            if (index < 0 || index >= songs.length) index = 0;
            // Verifica se a URL é válida
            if (!songs[index].src) return;
            
            audioPlayer.src = songs[index].src;
            songTitle.innerText = songs[index].title;
            currentSongIndex = index;
        }

        // Tratamento de Erro do Áudio
        audioPlayer.addEventListener('error', function(e) {
            console.warn("Erro ao carregar áudio, pulando para o próximo...", e);
            // Tenta pular para a próxima se der erro
            setTimeout(() => {
                nextSong();
            }, 1000);
        });

        function togglePlay() {
            if (audioPlayer.paused) {
                const playPromise = audioPlayer.play();
                if (playPromise !== undefined) {
                    playPromise.then(_ => {
                        playBtnIcon.classList.remove('fa-play');
                        playBtnIcon.classList.add('fa-pause');
                    })
                    .catch(error => {
                        console.log("Reprodução automática impedida ou erro de fonte:", error);
                        playBtnIcon.classList.remove('fa-pause');
                        playBtnIcon.classList.add('fa-play');
                    });
                }
            } else {
                audioPlayer.pause();
                playBtnIcon.classList.remove('fa-pause');
                playBtnIcon.classList.add('fa-play');
            }
        }

        function nextSong() {
            currentSongIndex = (currentSongIndex + 1) % songs.length;
            loadSong(currentSongIndex);
            
            const playPromise = audioPlayer.play();
            if (playPromise !== undefined) {
                playPromise.catch(e => {
                    console.log("Erro ao reproduzir próxima música: ", e);
                });
            }
            
            playBtnIcon.classList.remove('fa-play');
            playBtnIcon.classList.add('fa-pause');
        }

        function prevSong() {
            currentSongIndex = (currentSongIndex - 1 + songs.length) % songs.length;
            loadSong(currentSongIndex);
            
            const playPromise = audioPlayer.play();
            if (playPromise !== undefined) {
                playPromise.catch(e => {
                    console.log("Erro ao reproduzir música anterior: ", e);
                });
            }

            playBtnIcon.classList.remove('fa-play');
            playBtnIcon.classList.add('fa-pause');
        }

        audioPlayer.addEventListener('timeupdate', () => {
            if (audioPlayer.duration) {
                const percent = (audioPlayer.currentTime / audioPlayer.duration) * 100;
                progressBar.style.width = `${percent}%`;
            }
        });

        audioPlayer.addEventListener('ended', nextSong);

        // --- SYSTEM START (BREACH PROTOCOL) ---
        function enterSystem() {
            const startScreen = document.getElementById('start-screen');
            const mainContent = document.getElementById('main-content');
            
            // Carrega e tenta tocar a primeira música
            loadSong(0);
            audioPlayer.volume = 0.4;
            
            const playPromise = audioPlayer.play();
            if (playPromise !== undefined) {
                playPromise.then(_ => {
                    playBtnIcon.classList.remove('fa-play');
                    playBtnIcon.classList.add('fa-pause');
                }).catch(error => {
                    console.log("Interação do usuário necessária para áudio: ", error);
                });
            }

            startScreen.style.transition = "opacity 1s, transform 1s";
            startScreen.style.opacity = "0";
            startScreen.style.transform = "scale(1.5)";
            
            setTimeout(() => {
                startScreen.style.display = 'none';
                mainContent.classList.remove('hidden-page');
                mainContent.classList.add('visible-page');
                startTerminalTyping();
            }, 800);
        }

        // --- TERMINAL TYPING EFFECT ---
        const terminalLogs = [
            "Initializing Spanel core modules...",
            "Loading KD Calculator...",
            "Encrypting Note Storage...",
            "Syncing World Clock...",
            "Mazikeen Protocol: ACTIVE",
            "Waiting for user input..."
        ];

        function startTerminalTyping() {
            const term = document.getElementById('terminal-content');
            let i = 0;
            
            function typeLine() {
                if (i < terminalLogs.length) {
                    const p = document.createElement('div');
                    p.className = "mb-1 border-l-2 border-transparent pl-2 animate-pulse";
                    p.innerHTML = `<span class="text-green-600">➜</span> ${terminalLogs[i]}`;
                    term.appendChild(p);
                    i++;
                    setTimeout(typeLine, 800);
                }
            }
            typeLine();
        }

        // --- NICK GENERATOR ---
        const prefixes = ["⚡", "☠", "꧁", "★", "♛", "xX", "Im"];
        const suffixes = ["⚡", "☠", "꧂", "★", "♛", "Xx", "God"];
        const midWords = ["Spanel", "Hacker", "Pro", "Ghost", "Viper", "Killa", "Shadow", "Mazikeen"];
        const leetMap = {'a': '4', 'e': '3', 'i': '1', 'o': '0', 's': '5', 't': '7'};

        function toLeet(str) {
            return str.split('').map(c => leetMap[c.toLowerCase()] || c).join('');
        }

        function generateNick() {
            const base = document.getElementById('baseName').value || midWords[Math.floor(Math.random() * midWords.length)];
            const pre = prefixes[Math.floor(Math.random() * prefixes.length)];
            const suf = suffixes[Math.floor(Math.random() * suffixes.length)];
            
            let name = base;
            if(Math.random() > 0.5) name = toLeet(name);
            
            const finalNick = `${pre}${name}${suf}`;
            document.getElementById('nick-result').innerText = finalNick;
        }

        function copyNick() {
            const nick = document.getElementById('nick-result').innerText;
            if(nick === "---") return;
            navigator.clipboard.writeText(nick).then(() => {
                alert("Nick copiado para a área de transferência!");
            });
        }

        // --- NEW: WEB SEARCH PROTOCOL ---
        function handleSearch(event) {
            if (event.key === 'Enter') {
                webSearch();
            }
        }
        function webSearch() {
            const query = document.getElementById('web-search-input').value;
            if (query) {
                window.open(`https://www.google.com/search?q=${encodeURIComponent(query)}`, '_blank');
            }
        }

        // --- NEW: KD CALCULATOR ---
        function calcKD() {
            const k = parseFloat(document.getElementById('kills-input').value) || 0;
            const d = parseFloat(document.getElementById('deaths-input').value) || 0;
            const rankElem = document.getElementById('kd-rank');
            
            if (d === 0) {
                document.getElementById('kd-result').innerText = k.toFixed(2);
                rankElem.innerText = "IMORTAL";
                rankElem.className = "text-sm text-yellow-400 font-bold glow";
                return;
            }

            const ratio = k / d;
            document.getElementById('kd-result').innerText = ratio.toFixed(2);

            let rank = "NOVATO";
            let color = "text-gray-500";

            if (ratio > 0.5) { rank = "SOLDADO"; color = "text-white"; }
            if (ratio > 1.0) { rank = "VETERANO"; color = "text-green-400"; }
            if (ratio > 2.0) { rank = "ELITE"; color = "text-blue-400"; }
            if (ratio > 4.0) { rank = "LENDA"; color = "text-purple-400"; }
            if (ratio > 8.0) { rank = "HACKER?"; color = "text-red-500 font-bold glitch-text"; }

            rankElem.innerText = rank;
            rankElem.className = `text-sm ${color} mt-1`;
        }

        // --- NEW: SECURE NOTES (AUTO SAVE) ---
        const notesArea = document.getElementById('secure-notes');
        notesArea.value = localStorage.getItem('spanel_notes') || '';
        
        notesArea.addEventListener('input', () => {
            localStorage.setItem('spanel_notes', notesArea.value);
            const status = document.getElementById('save-status');
            status.innerText = "SAVING...";
            setTimeout(() => status.innerText = "AUTO-SAVE: ON", 500);
        });

        function clearNotes() {
            if(confirm("Deletar todas as notas permanentemente?")) {
                notesArea.value = "";
                localStorage.setItem('spanel_notes', "");
            }
        }

        // --- NEW: PASSWORD GENERATOR ---
        function generatePass() {
            const len = document.getElementById('pass-len').value;
            const chars = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*()_+";
            let pass = "";
            for (let i = 0; i < len; i++) {
                pass += chars.charAt(Math.floor(Math.random() * chars.length));
            }
            document.getElementById('pass-result').innerText = pass;
        }

        // --- NEW: WORLD CLOCK ---
        function updateClocks() {
            const now = new Date();
            document.getElementById('time-br').innerText = now.toLocaleTimeString('pt-BR', { timeZone: 'America/Sao_Paulo' });
            document.getElementById('time-ny').innerText = now.toLocaleTimeString('en-US', { timeZone: 'America/New_York' });
            document.getElementById('time-cn').innerText = now.toLocaleTimeString('en-US', { timeZone: 'Asia/Shanghai', hour12: false });
        }
        setInterval(updateClocks, 1000);
        updateClocks();

        // --- YOUTUBE LOADER ---
        function loadVideo() {
            const input = document.getElementById('yt-link').value;
            const frame = document.getElementById('yt-frame');
            const placeholder = document.getElementById('video-placeholder');
            
            // Regex simples para pegar ID do youtube
            const regExp = /^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/;
            const match = input.match(regExp);

            if (match && match[2].length === 11) {
                frame.src = `https://www.youtube.com/embed/${match[2]}?autoplay=1&theme=dark`;
                frame.classList.remove('hidden');
                placeholder.classList.add('hidden');
            } else {
                alert("Link inválido! Insira um link completo do YouTube.");
            }
        }

        // --- PING SIMULATOR ---
        setInterval(() => {
            const ping = Math.floor(Math.random() * (45 - 15 + 1) + 15);
            document.getElementById('ping-val').innerText = ping + " ms";
            document.getElementById('ping-bar').style.width = (ping * 2) + "%";
            
            if(ping > 35) {
                document.getElementById('ping-val').className = "text-yellow-500 font-bold";
                document.getElementById('ping-bar').className = "bg-yellow-500 h-full transition-all duration-100";
            } else {
                document.getElementById('ping-val').className = "text-green-400 font-bold";
                document.getElementById('ping-bar').className = "bg-green-500 h-full transition-all duration-100";
            }
        }, 1000);

    </script>
</body>
</html>
